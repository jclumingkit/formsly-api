(()=>{"use strict";const e=require("dotenv"),s=require("express"),t=s.Router();t.get("/ticket",(async(e,s)=>{try{const{id:t}=e.params;if("getTicket"===e.action){const e=await fetch(`${process.env.JIRA_DOMAIN_URL}/servicedeskapi/request/${t}`,{method:"GET",headers:{Authorization:`Basic ${Buffer.from(`${process.env.JIRA_USER}:${process.env.JIRA_API_TOKEN}`).toString("base64")}`,Accept:"application/json","Content-Type":"application/json"}}),o=await e.json();s.status(200).send(o)}else if("getStatus"===e.action){const e=await fetch(`${process.env.JIRA_DOMAIN_URL}/servicedeskapi/request/${t}/status?limit=1`,{method:"GET",headers:{Authorization:`Basic ${Buffer.from(`${process.env.JIRA_USER}:${process.env.JIRA_API_TOKEN}`).toString("base64")}`,Accept:"application/json","Content-Type":"application/json"}}),o=(await e.json()).values[0];s.status(200).send(o)}}catch(e){s.status(500).json({message:e.message})}}));const o=t;e.config();const n=s();n.use(s.json()),n.get("/",((e,s)=>s.send("Hello from Formsly API"))),n.use("/jira",o),n.listen(8080,(()=>{console.log("Server is running on port 8080")}))})();