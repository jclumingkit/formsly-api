(()=>{"use strict";const s=require("express"),e=s.Router();e.get("/ticket/:id",(async(s,e)=>{try{const{id:t}=s.params,o=await fetch(`${process.env.JIRA_DOMAIN_URL}/servicedeskapi/request/${t}`,{method:"GET",headers:{Authorization:`Basic ${Buffer.from(`${process.env.JIRA_USER}:${process.env.JIRA_API_TOKEN}`).toString("base64")}`,Accept:"application/json","Content-Type":"application/json"}}),a=await o.json();e.status(200).send(a)}catch(s){e.status(500).json({message:s.message})}})),e.get("/ticket/:id/status",(async(s,e)=>{try{const{id:t}=s.params,o=await fetch(`${process.env.JIRA_DOMAIN_URL}/servicedeskapi/request/${t}/status?limit=1`,{method:"GET",headers:{Authorization:`Basic ${Buffer.from(`${process.env.JIRA_USER}:${process.env.JIRA_API_TOKEN}`).toString("base64")}`,Accept:"application/json","Content-Type":"application/json"}}),a=(await o.json()).values[0];e.status(200).send(a)}catch(s){e.status(500).json({message:s.message})}}));const t=e;require("dotenv").config();const o=s();o.use(s.json()),o.get("/",((s,e)=>e.send("Hello from Formsly API"))),o.use("/jira",t),o.listen(8080,(()=>{console.log("Server is running on port 8080")}))})();